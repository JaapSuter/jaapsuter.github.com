$call: try-reload-extensions();

@import "compass/utilities";
@import "compass/css3";
@import "compass/layout";
@import "compass/css3/transform";

@import "framework/const";
@import "framework/globals";

@import "framework/func/func-util";
@import "framework/func/func-color";
@import "framework/func/func-type";

@import "framework/mixin/mixin-util";
@import "framework/mixin/mixin-debug";
@import "framework/mixin/mixin-color";
@import "framework/mixin/mixin-type";
@import "framework/mixin/mixin-media-query";

// Up to this point, no styling should be applied - we've only defined
// constants, functions, and mixins. Hence the resulting compressed CSS
// file (with comments stripped, etc.) should be of zero size.

html {
  font-size: $pp-rem / $pp-rem-initial-value * 100%;
  line-height: 100%;
}


@unless $type-disable-font-face {
  @if in-development-mode() { @import url(at-font-face.dev.css); }
  @else { @each $font in get_font_list() { @include at-font-face($font); } }  
}

@each $font in get_font_list() { @include abstract-font-face-family($font); }

$import-base-normalize-separately: in-development-mode();
@import "base/base-normalize";
@import "base/base-reset";

@include diet {
  
  $ideal-measure: 36em;
  $ideal-em-over-el: 1.5;
  
  @if responsive(max-width,  24em) { $pp-em: 16px; $pp-el: 22px; }
  @if responsive(max-width,  32em) { $pp-em: 16px; $pp-el: 23px; }
                                                    
  @if responsive(_default)         { $pp-em: 16px; $pp-el: 24px; }
                                                    
  @if responsive(min-width,  46em) { $pp-em: 17px; $pp-el: $pp-em * $ideal-em-over-el; }
  @if responsive(min-width,  51em) { $pp-em: 17px; $pp-el: $pp-em * $ideal-em-over-el; }
  @if responsive(min-width,  55em) { $pp-em: 18px; $pp-el: $pp-em * $ideal-em-over-el; }
  @if responsive(min-width,  60em) { $pp-em: 19px; $pp-el: $pp-em * $ideal-em-over-el; }
  @if responsive(min-width,  64em) { $pp-em: 19px; $pp-el: $pp-em * $ideal-em-over-el; }
  @if responsive(min-width,  72em) { $pp-em: 20px; $pp-el: $pp-em * $ideal-em-over-el; }
  @if responsive(min-width,  84em) { $pp-em: 21px; $pp-el: $pp-em * $ideal-em-over-el; }
  @if responsive(min-width,  94em) { $pp-em: 22px; $pp-el: $pp-em * $ideal-em-over-el; }
  @if responsive(min-width, 102em) { $pp-em: 24px; $pp-el: $pp-em * $ideal-em-over-el; }

  $pp-half-leading: round(($pp-el - $pp-em) / 2);
  $pp-el: $pp-em + 2 * $pp-half-leading;
  
  $pp-cap: get-font-metric-at-size($body-font-family, $pp-em, cap);
  $pp-ex:  get-font-metric-at-size($body-font-family, $pp-em, ex);
  $pp-bo:  get-font-metric-at-size($body-font-family, $pp-em, baseline) + $pp-half-leading;
    
  @include debug-msg("#{$pp-em}:#{$pp-el}=1:#{round-two-decimals($pp-el / $pp-em)}");
  
  ::moz-selection { @include color-and-background-color($red-ll, $blue-dd, false); text-shadow: none; }
  ::selection { @include color-and-background-color($red-ll, $blue-dd, false); text-shadow: none; }
  
  body {
    position:  relative;    
    max-width: $ideal-measure;
    margin: 0 auto;  
    
    @include color-and-background-color($black, $white);
    @extend %#{$body-font-family};
    
    @include units(font-size, $pp-em, $pp-rem);
    @include units(line-height, 1el);
  }

  p {
    @include units(margin-bottom, 1el);
  }

  h1, h2, h3, h4, h5, h6 {
    font-size: 1em;
    // @extend %pan4n;
    color: red;
  }
  
  h1 { @include change-type(pan7n, ex, 2el) {} }
  h2 { @include change-type(pan4n, ex, 1el) {} }
  h3 { @include change-type(pan4n, cap, 1el) {} }
  .small { @include change-type(pan4n, cap, $pp-ex) {} }

  @if in-development-mode() {
    .baseline {
      @include background-image-baseline-grid();
    }
  }

  @include debug-msg-install();
}

#colorize {
  li { list-style: none; display: block; }
}

.black       { color: $white; background-color: $black   ;}
.white       { color: $black; background-color: $white   ;}
.red-ddd     { color: $white; background-color: $red-ddd ;}
.red-dd      { color: $white; background-color: $red-dd  ;}
.red-d       { color: $white; background-color: $red-d   ;}
.red         { color: $white; background-color: $red     ;}
.red-l       { color: $black; background-color: $red-l   ;}
.red-ll      { color: $black; background-color: $red-ll  ;}
.red-lll     { color: $black; background-color: $red-lll ;}
.blue-ddd    { color: $white; background-color: $blue-ddd;}
.blue-dd     { color: $white; background-color: $blue-dd ;}
.blue-d      { color: $white; background-color: $blue-d  ;}
.blue        { color: $white; background-color: $blue    ;}
.blue-l      { color: $black; background-color: $blue-l  ;}
.blue-ll     { color: $black; background-color: $blue-ll ;}
.blue-lll    { color: $black; background-color: $blue-lll;}