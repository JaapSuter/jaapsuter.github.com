'use strict';var l=void 0,n=!0,t=null,v=!1;
(function(d){var e,f=[].slice;e={i:function(){function c(c){this.I=c;this.count=1;this.S=t}c.prototype.h=function(){if(!--this.count)return this.I(this.S)};c.prototype.defer=function(c){var d=this;++this.count;return function(){var i,g;i=1<=arguments.length?f.call(arguments,0):[];c!=t&&(g=c.j)!=t&&g.apply(t,i);return d.h()}};return c}(),ba:function(){return t}};d.u=e;d.a={t:{},p:{},font:{},keys:{},o:{}}}).call(l,window,function(){window.F==t&&(window.F={});return window.F}());
(function(d,e){var f,c;d.u!=t||(d.u={});c=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];f=function(){var d,f,i,g;f=v;i=0;for(g=c.length;i<g;i++){d=c[i];try{f=d()}catch(e){continue}return f}};e.send=function(c,d,i){var g;if(g=f()){if(g.open(i?"PUT":"GET",c,n),i&&g.setRequestHeader("Content-type","application/x-www-form-urlencoded"),g.onreadystatechange=
function(){if(4===g.readyState)return 200===g.status||304===g.status?d(n,g.responseText):d(v)},4!==g.readyState)return g.send(i)}else return d(v)}}).call(l,window,function(){var d;window.a==t&&(window.a={});if((d=window.a).o==t)d.o={};return window.a.o}());
(function(d,e){function f(b,c){return function(){return b.apply(c,arguments)}}var c,h,p,i,g,k,j,q,s,b,m,o=[].indexOf||function(b){for(var c=0,w=this.length;c<w;c++)if(c in this&&this[c]===b)return c;return-1};b=function(){};j=d.u;m=d.a;q=m.t;h=m.o;p=m.p;i=["georgia","arial","verdana"];g=function(b){if(0<=o.call(i,b))return"normal";switch(b[2]){case "i":return"italic";case "o":return"oblique";default:return"normal"}};k=function(b){return 0<=o.call(i,b)?400:100*b[3]};c=function(){function b(w){this.n=
w.n;this.r=w.r;this.l=f(this.l,this);this.D=3;this.R=this.n/2;this.e=document.createElement("canvas");this.g=document.createElement("canvas");this.c=this.e.getContext("2d");this.f=this.g.getContext("2d");this.c.textBaseline=this.f.textBaseline="alphabetic";this.c.textAlign=this.f.textAlign="left";this.c.fillStyle=this.f.fillStyle="#000";w=p.create("div",'<img style="vertical-align: baseline" width="1" height="1" alt="" src="/img/1x1-black.png">bHxp');this.d=w[0];this.P=w[1][0];this.d.style.whiteSpace=
"nowrap";this.d.style.position="absolute";this.d.style.lineHeight=this.D;document.body.insertBefore(this.d,document.body.firstChild);this.e.style.backgroundColor="#fee";this.g.style.backgroundColor="#eef";document.body.insertBefore(this.g,document.body.children[0]);document.body.insertBefore(this.e,this.g)}var c;b.T="Easel";b.prototype.J=function(b,c){this.c.clearRect(0,0,this.fontSize,this.b);this.f.clearRect(0,0,this.fontSize,this.b);c&&(this.c.save(),this.c.translate(0,this.b),this.c.scale(1,-1),
this.c.translate(0,-this.b));this.c.fillText(b,0,this.b);c&&this.c.restore()};c=function(b){return 1<<Math.floor(Math.log(b-1)/Math.log(2))};b.prototype.O=function(){var b,d;this.f.drawImage(this.e,0,0);d=c(this.fontSize);for(b=this.fontSize-d;d;)this.f.drawImage(this.e,d,0,b,this.b,0,0,b,this.b),b=[this.f,this.c],this.c=b[0],this.f=b[1],b=[this.g,this.e],this.e=b[0],this.g=b[1],b=d>>=1};b.prototype.L=function(){var b,c;b=this.c.getImageData(0,0,1,this.b).data;b[b.length-4+3]=255;for(c=3;0===b[c];)c+=
4;return(c-3)/4};b.prototype.q=function(b,c){c==t&&(c=v);this.J(b,c);this.O();return this.L()};b.prototype.M=function(){this.fontSize<this.n||this.b<this.R?this.w=this.z=this.C=this.B=0:(this.w=this.b-this.q("b"),this.C=this.b-this.q("x"),this.z=this.b-this.q("H"),this.B=this.b-this.q("p",n))};b.prototype.N=function(b,c,d,r){this.fontSize=b;this.d.style.fontSize=""+this.fontSize+"px";b=(this.D*this.fontSize-this.fontSize)/2;this.e.width=this.g.width=this.fontSize;this.b=this.P.offsetTop+1-b;this.e.height=
this.g.height=this.b;this.c.font=this.f.font=""+k(c)+" "+g(c)+" "+this.fontSize+"px "+c;this.M();d.baseline[this.fontSize]=this.b;d.ascent[this.fontSize]=this.w;d.cap[this.fontSize]=this.z;d.ex[this.fontSize]=this.C;d.descent[this.fontSize]=this.B;q.G(r)};b.prototype.K=function(b,c){var d,r,f,i=this;this.d.style.fontFamily=b;this.d.style.fontStyle=g(b);this.d.style.fontWeight=k(b);d={baseline:[],ex:[],cap:[],ascent:[],descent:[]};(function(c){var g,m;r=0;g=[];m=function(c){var e,h,u;e=function(){return c(g)};
h=function(){++r;return m(c)};u=function(b){g.push(b);return h()};if(r<=i.r)f=new j.i(u,{parent:t,filename:"B:/Projects/Web/jaapsuter.github.com/dev/_coffee/jaap/font.coffee",k:"Easel.getFamilyMetrics"}),i.N(r,b,d,f.defer({m:143})),f.h();else return e()};m(c)})(function(){return c(n,d)})};b.prototype.l=function(b,c){var d,r,f,i,g,m,e=this;i={minFontSize:this.n,maxFontSize:this.r,families:b};(function(c){var f,i,e,h;i=b.length;f=0;e=[];h=function(c){var u,o,k;u=function(){return c(e)};o=function(){++f;
return h(c)};k=function(b){e.push(b);return o()};if(f<i)r=b[f],function(b){m=new j.i(b,{parent:t,filename:"B:/Projects/Web/jaapsuter.github.com/dev/_coffee/jaap/font.coffee",k:"Easel.getMetrics"});s(r,m.defer({j:function(){return function(b,c){g=b;return d=c}}(),m:155}));m.h()}(k);else return u()};h(c)})(function(){(function(c){if(g)(function(c){var h,u,o,k;u=b.length;h=0;o=[];k=function(c){var y,p,z;y=function(){return c(o)};p=function(){++h;return k(c)};z=function(b){o.push(b);return p()};if(h<
u)r=b[h],function(b){m=new j.i(b,{parent:t,filename:"B:/Projects/Web/jaapsuter.github.com/dev/_coffee/jaap/font.coffee",k:"Easel.getMetrics"});s(r,m.defer({j:function(){return function(b,c){g=b;return d=c}}(),m:159}));m.h()}(function(){(function(b){if(g)(function(b){m=new j.i(b,{parent:t,filename:"B:/Projects/Web/jaapsuter.github.com/dev/_coffee/jaap/font.coffee",k:"Easel.getMetrics"});e.K(d,m.defer({j:function(){return function(b,c){g=b;return f=c}}(),m:161}));m.h()})(function(){return b(i[d]=g?
f:"error obtaining metrics")});else return b()})(z)});else return y()};k(c)})(function(){return c(e.d.parentNode.removeChild(e.d))});else return c()})(function(){return c(g,i)})})};return b}();e.ka=s=function(b,c){var d,f,i,m,e,h,o,j;j=p.create("div","<span>b H x p</span><br><span>b H x p</span>");i=j[0];j=j[1];m=j[0];e=j[2];i.style.cssText="visibility: visible;\nposition: absolute;\ntop: 0;\nleft: 0;\nfont-family: serif;\nfont-size: 137px;\nfont-style: "+g(b)+";\nfont-weight: "+k(b)+";\nline-height: 1;\nwhite-space: nowrap;";
e.style.fontFamily=""+b+", serif";document.body.insertBefore(i,document.body.firstChild);d=75;h=2;f=function(b,d){i.parentNode.removeChild(i);return c(b,d)};o=function(){return m.offsetWidth!==e.offsetWidth?0===h--?f(n,b):q.G(o):0===d--?f(v,b):q.A(o,40)};return o()};e.l=function(f){var g,m,e,o,k,p,q,s,f="psn7n-inv,tan2n,tan4c,tan4n,tan7n,tao4n,tmn4n,tsi4n,tsi4n-smcp,tsi4n-tnum-lnum,tsi7n,tsn4n,tsn4n-smcp,tsn4n-tnum-lnum,tsn7n,pan2n,pan2n-inv,pan4n,pan4n-inv,pan7n,pan7n-inv,psi4n,psi4n-inv,psi7n,psi7n-inv,psn4n,psn4n-inv,psn7n".split(",");
if((s=d.a)!=t&&s.Y)f=["tan2n"];f=i.concat(f);f=function(){var b,c,d;d=[];b=0;for(c=f.length;b<c;b++)e=f[b],0>e.indexOf("inv")&&d.push(e);return d}();m=new c({n:8,r:237});(function(b){q=new j.i(b,{parent:t,filename:"B:/Projects/Web/jaapsuter.github.com/dev/_coffee/jaap/font.coffee",k:"getMetrics"});m.l(f,q.defer({j:function(){return function(b,c){k=b;return o=c}}(),m:249}));q.h()})(function(){if(k)g=JSON.stringify({payload:o,browser:"unknown"},t,4),function(b){q=new j.i(b,{parent:t,filename:"B:/Projects/Web/jaapsuter.github.com/dev/_coffee/jaap/font.coffee",
k:"getMetrics"});h.send("/ajax/json/type-metrics",q.defer({j:function(){return function(b,c){k=b;return p=c}}(),m:252}),g);q.h()}(function(){return b(alert("ok: "+k+", resp: "+p))});else return b()})}}).call(l,window,function(){var d;window.a==t&&(window.a={});if((d=window.a).font==t)d.font={};return window.a.font}());
(function(d,e){e.time=function(d){var c;c=new Date;d();return new Date-c};e.ca=function(d){return d===+d||"[object Number]"===Object.prototype.toString.call(d)};e.Q=function(d){return"undefined"===typeof d};e.A=function(d,c){var e;e=this.H(arguments,2);return setTimeout(function(){return d.apply(d,e)},c)};e.G=function(d){return this.A.apply(this,[d,1].concat(this.H(arguments)))};e.H=function(d,c){return Array.prototype.slice.call(d,this.Q(c)?1:c)}}).call(l,window,function(){var d;window.a==t&&(window.a=
{});if((d=window.a).t==t)d.t={};return window.a.t}());
(function(d,e){var f,c,h,p,i,g,k,j,q={}.hasOwnProperty,s=[].indexOf||function(b){for(var c=0,d=this.length;c<d;c++)if(c in this&&this[c]===b)return c;return-1};c=function(b,c){var d,e,f,h,j,b=b.replace(/\s/g,"");e=b.split(",");""===e[e.length-1]&&(e[e.length-2]+=",");d=0;for(j=[];d<e.length;){h=[];b=e[d].split("+");if(1<b.length){h=b.slice(0,b.length-1);for(f=0;f<h.length;)h[f]=i[h[f]],f++;b=[b[b.length-1]]}b=b[0];b=p[b]||b.toUpperCase().charCodeAt(0);b in g||(g[b]=[]);g[b].push({ga:e[d],method:c,
key:e[d],s:h});j.push(d++)}return j};c.filter=function(b){b=(b.target||b.srcElement).tagName;return!("INPUT"===b||"SELECT"===b||"TEXTAREA"===b)};f=function(b,c,d){b.addEventListener?b.addEventListener(c,d,v):b.attachEvent&&b.attachEvent("on"+c,function(){return d(window.event)})};g={};j={16:v,18:v,17:v,91:v};i={shift:16,alt:18,da:18,W:17,V:91};for(h=k=1;20>k;h=++k)i["f"+h]=111+h;p={U:8,ia:9,clear:12,$:13,"return":13,aa:27,escape:27,ha:32,left:37,ja:38,right:39,Z:40,X:46,"delete":46,home:36,end:35,
fa:33,ea:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220};for(h in i)q.call(i,h)&&(c[h]=v);f(document,"keydown",function(b){var d,e,f,h,k,p,x;h=b.keyCode;if(93===h||224===h)h=91;if(h in j)for(f in j[h]=n,i)i[f]===h&&(c[f]=n);else if(c.filter.call(this,b)&&h in g){e=0;for(x=[];e<g[h].length;){d=g[h][e];k=0<d.s.length;for(f in j)if(q.call(j,f)&&(!j[f]&&0<=s.call(d.s,+f)||j[f]&&(p=!+f,0<=s.call(d.s,p))))k=v;if((0===d.s.length&&!j[16]&&!j[18]&&!j[17]&&!j[91]||
k)&&d.method(b,d)===v)b.preventDefault?b.preventDefault():b.returnValue=v,b.stopPropagation&&b.stopPropagation(),b.cancelBubble&&(b.cancelBubble=n);x.push(e++)}return x}});f(document,"keyup",function(b){var d,b=b.keyCode;if(93===b||224===b)b=91;if(b in j)for(d in j[b]=v,i)i[d]===b&&(c[d]=v)});f(window,"focus",function(){for(var b in j)j[b]=v;for(b in i)c[b]=v});e.v=c}).call(l,window,function(){var d;window.a==t&&(window.a={});if((d=window.a).keys==t)d.keys={};return window.a.keys}());
(function(d,e){e.create=function(d,c){var e;e=document.createElement(d);e.innerHTML=c;return[e,e.children]}}).call(l,window,function(){var d;window.a==t&&(window.a={});if((d=window.a).p==t)d.p={};return window.a.p}());
(function(d){var e,f;e=d.a;d=e.keys;f=e.font;e=function(){var c,d;d=parseFloat(window.getComputedStyle(document.body).lineHeight);c=function(c){var e,f,k;k={fontSize:"0",lineHeight:"0"};(e=document.querySelector(c))&&(k=window.getComputedStyle(e));f=parseFloat(k.fontSize);k=parseFloat(k.lineHeight);e=e.getBoundingClientRect().height;return""+f+"/"+k+("html"===c||"body"===c?"":" "+e+" / "+d+" = "+e/d)+": "+c+"<br/>"};return document.querySelector("#dimensions").innerHTML=""+c("html")+"\n"+c("body")+
"\n"+c("p")+"\n"+c("h1")+"\n"+c("h2")+"\n"+c("h3")+"\n"+c(".small")};top===window&&(d.v("ctrl+b",function(){var c;if(c=document.querySelector("#baseline-checkbox"))return c.checked=!c.checked}),d.v("shift+t",f.l),d.v("d",e))}).call(l,window,function(){window.a==t&&(window.a={});return window.a}());
