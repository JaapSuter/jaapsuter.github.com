'use strict';var k=void 0,o=!0,s=null,u=!1;
(function(c){var e,f=[].slice;e={i:function(){function d(d){this.I=d;this.count=1;this.S=s}d.prototype.h=function(){if(!--this.count)return this.I(this.S)};d.prototype.defer=function(d){var c=this;++this.count;return function(){var g,i;g=1<=arguments.length?f.call(arguments,0):[];d!=s&&(i=d.j)!=s&&i.apply(s,g);return c.h()}};return d}(),aa:function(){return s}};c.v=e;c.a={o:{},q:{},font:{},keys:{},p:{}}}).call(k,window,function(){window.F==s&&(window.F={});return window.F}());
(function(c,e){var f,d;c.v!=s||(c.v={});d=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];f=function(){var c,f,g,i;f=u;g=0;for(i=d.length;g<i;g++){c=d[g];try{f=c()}catch(e){continue}return f}};e.send=function(d,c,g){var i;if(i=f()){if(i.open(g?"PUT":"GET",d,o),g&&i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=
function(){if(4===i.readyState)return 200===i.status||304===i.status?c(o,i.responseText):c(u)},4!==i.readyState)return i.send(g)}else return c(u)}}).call(k,window,function(){var c;window.a==s&&(window.a={});if((c=window.a).p==s)c.p={};return window.a.p}());
(function(c,e){function f(b,d){return function(){return b.apply(d,arguments)}}var d,h,q,g,i,m,j,p,w,b,l,n=[].indexOf||function(b){for(var d=0,v=this.length;d<v;d++)if(d in this&&this[d]===b)return d;return-1};b=function(){};j=c.v;l=c.a;p=l.o;h=l.p;q=l.q;g=["georgia","arial","verdana"];i=function(b){if(0<=n.call(g,b))return"normal";switch(b[2]){case "i":return"italic";case "o":return"oblique";default:return"normal"}};m=function(b){return 0<=n.call(g,b)?400:100*b[3]};d=function(){function b(v){this.n=
v.n;this.s=v.s;this.l=f(this.l,this);this.D=3;this.R=this.n/2;this.e=document.createElement("canvas");this.g=document.createElement("canvas");this.c=this.e.getContext("2d");this.f=this.g.getContext("2d");this.c.textBaseline=this.f.textBaseline="alphabetic";this.c.textAlign=this.f.textAlign="left";this.c.fillStyle=this.f.fillStyle="#000";v=q.create("div",'<img style="vertical-align: baseline" width="1" height="1" alt="" src="/img/1x1-black.png">bHxp');this.d=v[0];this.P=v[1][0];this.d.style.whiteSpace=
"nowrap";this.d.style.position="absolute";this.d.style.lineHeight=this.D;document.body.insertBefore(this.d,document.body.firstChild);this.e.style.backgroundColor="#fee";this.g.style.backgroundColor="#eef";document.body.insertBefore(this.g,document.body.children[0]);document.body.insertBefore(this.e,this.g)}var d;b.T="Easel";b.prototype.J=function(b,d){this.c.clearRect(0,0,this.fontSize,this.b);this.f.clearRect(0,0,this.fontSize,this.b);d&&(this.c.save(),this.c.translate(0,this.b),this.c.scale(1,-1),
this.c.translate(0,-this.b));this.c.fillText(b,0,this.b);d&&this.c.restore()};d=function(b){return 1<<Math.floor(Math.log(b-1)/Math.log(2))};b.prototype.O=function(){var b,c;this.f.drawImage(this.e,0,0);c=d(this.fontSize);for(b=this.fontSize-c;c;)this.f.drawImage(this.e,c,0,b,this.b,0,0,b,this.b),b=[this.f,this.c],this.c=b[0],this.f=b[1],b=[this.g,this.e],this.e=b[0],this.g=b[1],b=c>>=1};b.prototype.L=function(){var b,d;b=this.c.getImageData(0,0,1,this.b).data;b[b.length-4+3]=255;for(d=3;0===b[d];)d+=
4;return(d-3)/4};b.prototype.r=function(b,d){d==s&&(d=u);this.J(b,d);this.O();return this.L()};b.prototype.M=function(){this.fontSize<this.n||this.b<this.R?this.z=this.A=this.C=this.B=0:(this.z=this.b-this.r("b"),this.C=this.b-this.r("x"),this.A=this.b-this.r("H"),this.B=this.b-this.r("p",o))};b.prototype.N=function(b,d,c,g){this.fontSize=b;this.d.style.fontSize=""+this.fontSize+"px";b=(this.D*this.fontSize-this.fontSize)/2;this.e.width=this.g.width=this.fontSize;this.b=this.P.offsetTop+1-b;this.e.height=
this.g.height=this.b;this.c.font=this.f.font=""+m(d)+" "+i(d)+" "+this.fontSize+"px "+d;this.M();c.baseline[this.fontSize]=this.b;c.ascent[this.fontSize]=this.z;c.cap[this.fontSize]=this.A;c.ex[this.fontSize]=this.C;c.descent[this.fontSize]=this.B;p.G(g)};b.prototype.K=function(b,d){var c,g,r,f=this;this.d.style.fontFamily=b;this.d.style.fontStyle=i(b);this.d.style.fontWeight=m(b);c={baseline:[],ex:[],cap:[],ascent:[],descent:[]};(function(d){var i,l;g=0;i=[];l=function(d){var e,h,t;e=function(){return d(i)};
h=function(){++g;return l(d)};t=function(b){i.push(b);return h()};if(g<=f.s)r=new j.i(t,{parent:s,filename:"B:/Projects/Web/jaapsuter.github.com/dev/_coffee/jaap/font.coffee",k:"Easel.getFamilyMetrics"}),f.N(g,b,c,r.defer({m:143})),r.h();else return e()};l(d)})(function(){return d(o,c)})};b.prototype.l=function(b,d){var c,g,i,r,f,l,e=this;r={minFontSize:this.n,maxFontSize:this.s,families:b};(function(d){var i,r,e,h;r=b.length;i=0;e=[];h=function(d){var t,n,p;t=function(){return d(e)};n=function(){++i;
return h(d)};p=function(b){e.push(b);return n()};if(i<r)g=b[i],function(b){l=new j.i(b,{parent:s,filename:"B:/Projects/Web/jaapsuter.github.com/dev/_coffee/jaap/font.coffee",k:"Easel.getMetrics"});w(g,l.defer({j:function(){return function(b,d){f=b;return c=d}}(),m:155}));l.h()}(p);else return t()};h(d)})(function(){(function(d){if(f)(function(d){var h,t,n,p;t=b.length;h=0;n=[];p=function(d){var y,m,q;y=function(){return d(n)};m=function(){++h;return p(d)};q=function(b){n.push(b);return m()};if(h<
t)g=b[h],function(b){l=new j.i(b,{parent:s,filename:"B:/Projects/Web/jaapsuter.github.com/dev/_coffee/jaap/font.coffee",k:"Easel.getMetrics"});w(g,l.defer({j:function(){return function(b,d){f=b;return c=d}}(),m:159}));l.h()}(function(){(function(b){if(f)(function(b){l=new j.i(b,{parent:s,filename:"B:/Projects/Web/jaapsuter.github.com/dev/_coffee/jaap/font.coffee",k:"Easel.getMetrics"});e.K(c,l.defer({j:function(){return function(b,d){f=b;return i=d}}(),m:161}));l.h()})(function(){return b(r[c]=f?
i:"error obtaining metrics")});else return b()})(q)});else return y()};p(d)})(function(){return d(e.d.parentNode.removeChild(e.d))});else return d()})(function(){return d(f,r)})})};return b}();e.ja=w=function(b,d){var c,g,f,l,e,h,j,n;n=q.create("div","<span>b H x p</span><br><span>b H x p</span>");f=n[0];n=n[1];l=n[0];e=n[2];f.style.cssText="visibility: visible;\nposition: absolute;\ntop: 0;\nleft: 0;\nfont-family: serif;\nfont-size: 137px;\nfont-style: "+i(b)+";\nfont-weight: "+m(b)+";\nline-height: 1;\nwhite-space: nowrap;";
e.style.fontFamily=""+b+", serif";document.body.insertBefore(f,document.body.firstChild);c=75;h=2;g=function(b,c){f.parentNode.removeChild(f);return d(b,c)};j=function(){return l.offsetWidth!==e.offsetWidth?0===h--?g(o,b):p.G(j):0===c--?g(u,b):p.u(j,40)};return j()};e.l=function(c){var f,i,l,e,n,p,m,c="tan2n,tan4c,tan4n,tan7n,tao4n,tmn4n,tsi4n,tsi4n-smcp,tsi4n-tnum-lnum,tsi7n,tsn4n,tsn4n-smcp,tsn4n-tnum-lnum,tsn7n,pan2n,pan4n,pan4n-smcp,pan7n,pan7n-smcp,psi4n,psi7n,psn4n,psn7n".split(","),c=g.concat(c),
c=function(){var b,d,g;g=[];b=0;for(d=c.length;b<d;b++)l=c[b],0>l.indexOf("inv")&&g.push(l);return g}();i=new d({n:9,s:183});(function(b){m=new j.i(b,{parent:s,filename:"B:/Projects/Web/jaapsuter.github.com/dev/_coffee/jaap/font.coffee",k:"getMetrics"});i.l(c,m.defer({j:function(){return function(b,d){n=b;return e=d}}(),m:243}));m.h()})(function(){if(n)f=JSON.stringify({payload:e,browser:"unknown"},s,4),function(b){m=new j.i(b,{parent:s,filename:"B:/Projects/Web/jaapsuter.github.com/dev/_coffee/jaap/font.coffee",
k:"getMetrics"});h.send("/ajax/json/type-metrics",m.defer({j:function(){return function(b,d){n=b;return p=d}}(),m:246}),f);m.h()}(function(){return b(alert("ok: "+n+", resp: "+p))});else return b()})}}).call(k,window,function(){var c;window.a==s&&(window.a={});if((c=window.a).font==s)c.font={};return window.a.font}());
(function(c,e){e.time=function(c){var d;d=new Date;c();return new Date-d};e.ba=function(c){return c===+c||"[object Number]"===Object.prototype.toString.call(c)};e.Q=function(c){return"undefined"===typeof c};e.u=function(c,d){var e;e=this.H(arguments,2);return setTimeout(function(){return d.apply(d,e)},c)};e.G=function(c){return this.u.apply(this,[1,c].concat(this.H(arguments)))};e.H=function(c,d){return Array.prototype.slice.call(c,this.Q(d)?1:d)}}).call(k,window,function(){var c;window.a==s&&(window.a=
{});if((c=window.a).o==s)c.o={};return window.a.o}());
(function(c,e){var f,d,h,q,g,i,m,j,p={}.hasOwnProperty,w=[].indexOf||function(b){for(var d=0,c=this.length;d<c;d++)if(d in this&&this[d]===b)return d;return-1};d=function(b,d){var c,e,f,h,j,b=b.replace(/\s/g,"");e=b.split(",");""===e[e.length-1]&&(e[e.length-2]+=",");c=0;for(j=[];c<e.length;){h=[];b=e[c].split("+");if(1<b.length){h=b.slice(0,b.length-1);for(f=0;f<h.length;)h[f]=g[h[f]],f++;b=[b[b.length-1]]}b=b[0];b=q[b]||b.toUpperCase().charCodeAt(0);b in i||(i[b]=[]);i[b].push({fa:e[c],method:d,
key:e[c],t:h});j.push(c++)}return j};d.filter=function(b){b=(b.target||b.srcElement).tagName;return!("INPUT"===b||"SELECT"===b||"TEXTAREA"===b)};f=function(b,d,c){b.addEventListener?b.addEventListener(d,c,u):b.attachEvent&&b.attachEvent("on"+d,function(){return c(window.event)})};i={};j={16:u,18:u,17:u,91:u};g={shift:16,alt:18,ca:18,W:17,V:91};for(h=m=1;20>m;h=++m)g["f"+h]=111+h;q={U:8,ha:9,clear:12,Z:13,"return":13,$:27,escape:27,ga:32,left:37,ia:38,right:39,Y:40,X:46,"delete":46,home:36,end:35,
ea:33,da:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220};for(h in g)p.call(g,h)&&(d[h]=u);f(document,"keydown",function(b){var c,e,f,h,m,q,x;h=b.keyCode;if(93===h||224===h)h=91;if(h in j)for(f in j[h]=o,g)g[f]===h&&(d[f]=o);else if(d.filter.call(this,b)&&h in i){e=0;for(x=[];e<i[h].length;){c=i[h][e];m=0<c.t.length;for(f in j)if(p.call(j,f)&&(!j[f]&&0<=w.call(c.t,+f)||j[f]&&(q=!+f,0<=w.call(c.t,q))))m=u;if((0===c.t.length&&!j[16]&&!j[18]&&!j[17]&&!j[91]||
m)&&c.method(b,c)===u)b.preventDefault?b.preventDefault():b.returnValue=u,b.stopPropagation&&b.stopPropagation(),b.cancelBubble&&(b.cancelBubble=o);x.push(e++)}return x}});f(document,"keyup",function(b){var c,b=b.keyCode;if(93===b||224===b)b=91;if(b in j)for(c in j[b]=u,g)g[c]===b&&(d[c]=u)});f(window,"focus",function(){for(var b in j)j[b]=u;for(b in g)d[b]=u});e.w=d}).call(k,window,function(){var c;window.a==s&&(window.a={});if((c=window.a).keys==s)c.keys={};return window.a.keys}());
(function(c,e){e.create=function(c,d){var e;e=document.createElement(c);e.innerHTML=d;return[e,e.children]}}).call(k,window,function(){var c;window.a==s&&(window.a={});if((c=window.a).q==s)c.q={};return window.a.q}());
(function(c){var e,f,d,h,q,c=c.a;q=c.o;d=c.keys;f=c.font;h=function(){var d;if(d=document.querySelector("#baseline-checkbox"))return d.checked=!d.checked};e=function(){var d,c,e;d=document.body;e=parseFloat(window.getComputedStyle(d).lineHeight);c=function(d){var c,f,b;b={fontSize:"0",lineHeight:"0"};(c=document.querySelector(d))&&(b=window.getComputedStyle(c));f=parseFloat(b.fontSize);b=parseFloat(b.lineHeight);c=c.getBoundingClientRect().height;return""+f+"/"+b+("html"===d||"body"===d?"":" "+c+
" / "+e+" = "+c/e)+": "+d+"<br/>"};return document.querySelector("#dimensions").innerHTML=""+c("html")+"\n"+c("body")+"\n"+c("p")+"\n"+c("h1")+"\n"+c("h2")+"\n"+c("h3")+"\n"+c(".small")+"\nviewport: "+window.innerWidth+"\u00d7"+window.innerHeight+", "+window.orientation+"<br/>\nbody:     "+d.offsetWidth+"\u00d7"+d.offsetWidth};(function(){var c;if(top===window)return d.w("ctrl+b",h),d.w("shift+t",f.l),d.w("d",e),c=function(){e();return q.u(300,c)},c()})()}).call(k,window,function(){window.a==s&&(window.a=
{});return window.a}());
